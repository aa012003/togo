import{a as _}from"./axios-CV48_vsH.js";import{_ as y,r as p,o as i,c as n,d as k,b as e,F as d,e as h,v as g,x,w as P,g as b,t as c}from"./index-BqSyj61t.js";var C={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"joychiang",BASE_URL:"/togo/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u,VITE_PATH:m}=C,L={data(){return{products:{},pages:{},selectedCategory:"",currentPage:1,isLoading:!1}},watch:{"$route.query":{handler(){this.getProducts()}}},methods:{getProducts(){const{category:a=""}=this.$route.query,o=this.selectedCategory||a;this.isLoading=!0,_.get(`${u}/api/${m}/products?category=${o}&page=${this.currentPage}`).then(r=>{this.pages=r.data.pagination,this.products=r.data.products,this.isLoading=!1})},changePage(a){this.currentPage=a,this.getProducts()}},mounted(){_.get(`${u}/api/${m}/categories`).then(a=>{this.categories=a.data}),this.getProducts()}},T=e("div",{class:"bg-white sticky-top"},[e("div",{class:"container"})],-1),V={class:"container mt-md-5 mt-3 mb-7"},E={class:"row"},N={class:"card border-0 mb-4 position-relative position-relative"},R=["src"],$=e("a",{class:"text-dark"},[e("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),w={class:"card-body p-0"},B={class:"mb-0 mt-3"},U={to:"`/product/{product.id}`",class:"text-info",style:{"text-decoration":"none"}},D={key:0,class:"text-danger h5"},I={key:1},S={class:"text-light h6"},j={class:"text-danger h5"},A={class:"d-flex justify-content-center"},q={class:"pagination",style:{cursor:"pointer"}},F=e("span",{"aria-hidden":"true"},"«",-1),H=[F],O=["onClick"],z=e("span",{"aria-hidden":"true"},"»",-1),M=[z];function G(a,o,r,J,s,l){const v=p("loading"),f=p("RouterLink");return i(),n(d,null,[k(v,{active:s.isLoading,"onUpdate:active":o[0]||(o[0]=t=>s.isLoading=t),"can-cancel":!0,"on-cancel":a.onCancel,"is-full-page":a.fullPage},null,8,["active","on-cancel","is-full-page"]),T,e("div",V,[e("div",E,[(i(!0),n(d,null,h(s.products,t=>(i(),x(f,{to:`/product/${t.id}`,style:{"text-decoration":"none"},class:"col-md-3",key:t.id},{default:P(()=>[e("div",N,[e("img",{src:t.imageUrl,alt:"",class:"object-fit-cover"},null,8,R),$,e("div",w,[e("h6",B,[e("div",U,[b(c(t.title)+" ",1),t.origin_price==t.price?(i(),n("div",D,"NT$ "+c(t.price),1)):(i(),n("div",I,[e("del",S,"NT$ "+c(t.origin_price),1),e("div",j,"NT$ "+c(t.price),1)]))])])])])]),_:2},1032,["to"]))),128))]),e("nav",A,[e("ul",q,[e("li",{class:g(["page-item",{disabled:!s.pages.has_pre}])},[e("a",{onClick:o[1]||(o[1]=t=>l.changePage(s.pages.current_page-1)),class:"page-link","aria-label":"Previous"},H)],2),(i(!0),n(d,null,h(s.pages.total_pages,t=>(i(),n("li",{class:g(["page-item",{active:t===s.pages.current_page}]),key:t+123},[e("a",{class:"page-link",onClick:K=>l.changePage(t)},c(t),9,O)],2))),128)),e("li",{class:g(["page-item",{disabled:!s.pages.has_next}])},[e("a",{onClick:o[2]||(o[2]=t=>l.changePage(s.pages.current_page+1)),class:"page-link","aria-label":"Next"},M)],2)])])])],64)}const X=y(L,[["render",G]]);export{X as default};
