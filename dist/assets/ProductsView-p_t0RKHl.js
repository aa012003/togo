import{a as _}from"./axios-CV48_vsH.js";import{_ as k,a as x,r as p,o as i,c as n,d as b,b as e,F as d,e as h,v as g,x as P,w as C,g as T,t as c,y as L}from"./index-DCyEQq1u.js";import{c as V}from"./cartStore-Oa5pW8aX.js";import"./sweetalert2.all-dN4jrkzb.js";var w={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"joychiang",BASE_URL:"/togo/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u,VITE_PATH:m}=w,E={data(){return{products:{},product:{},qty:1,pages:{},selectedCategory:"",currentPage:1,isLoading:!1}},watch:{"$route.query":{handler(){this.getProducts()}}},methods:{getProducts(){const{category:o=""}=this.$route.query,a=this.selectedCategory||o;this.isLoading=!0,_.get(`${u}/api/${m}/products?category=${a}&page=${this.currentPage}`).then(r=>{this.pages=r.data.pagination,this.products=r.data.products,this.isLoading=!1})},changePage(o){this.currentPage=o,this.getProducts()},...x(V,["addToCart"])},mounted(){_.get(`${u}/api/${m}/categories`).then(o=>{this.categories=o.data}),this.getProducts()}},N=e("div",{class:"bg-white sticky-top"},[e("div",{class:"container"})],-1),R={class:"container mt-md-5 mt-3 mb-7"},$={class:"row"},B={class:"card border-0 mb-4 position-relative position-relative"},S=["src"],U=e("a",{class:"text-dark"},[e("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),q={class:"card-body p-0"},A={class:"mb-0 mt-3"},D={to:"`/product/{product.id}`",class:"text-info h4",style:{"text-decoration":"none"}},I=["onClick"],j=e("i",{class:"bi bi-cart"},null,-1),F=[j],H={key:0,class:"text-danger h5"},M={key:1},O={class:"text-light h6"},z={class:"text-danger h5"},G={class:"d-flex justify-content-center"},J={class:"pagination",style:{cursor:"pointer"}},K=e("span",{"aria-hidden":"true"},"Â«",-1),Q=[K],W=["onClick"],X=e("span",{"aria-hidden":"true"},"Â»",-1),Y=[X];function Z(o,a,r,ee,s,l){const v=p("loading"),f=p("RouterLink");return i(),n(d,null,[b(v,{active:s.isLoading,"onUpdate:active":a[0]||(a[0]=t=>s.isLoading=t),"can-cancel":!0,"on-cancel":o.onCancel,"is-full-page":o.fullPage},null,8,["active","on-cancel","is-full-page"]),N,e("div",R,[e("div",$,[(i(!0),n(d,null,h(s.products,t=>(i(),P(f,{to:`/product/${t.id}`,style:{"text-decoration":"none"},class:"col-md-3",key:t.id},{default:C(()=>[e("div",B,[e("img",{src:t.imageUrl,alt:"",class:"object-fit-cover"},null,8,S),U,e("div",q,[e("h6",A,[e("div",D,[T(c(t.title)+" ",1),e("button",{class:"btn btn-danger ms-2 text-white",style:{position:"relative",right:"0px",top:"0px"},onClick:L(y=>o.addToCart(t.id,s.qty),["prevent"])},F,8,I),t.origin_price==t.price?(i(),n("div",H,"NT$ "+c(t.price),1)):(i(),n("div",M,[e("del",O,"NT$ "+c(t.origin_price),1),e("div",z,"NT$ "+c(t.price),1)]))])])])])]),_:2},1032,["to"]))),128))]),e("nav",G,[e("ul",J,[e("li",{class:g(["page-item",{disabled:!s.pages.has_pre}])},[e("a",{onClick:a[1]||(a[1]=t=>l.changePage(s.pages.current_page-1)),class:"page-link","aria-label":"Previous"},Q)],2),(i(!0),n(d,null,h(s.pages.total_pages,t=>(i(),n("li",{class:g(["page-item",{active:t===s.pages.current_page}]),key:t+123},[e("a",{class:"page-link",onClick:y=>l.changePage(t)},c(t),9,W)],2))),128)),e("li",{class:g(["page-item",{disabled:!s.pages.has_next}])},[e("a",{onClick:a[2]||(a[2]=t=>l.changePage(s.pages.current_page+1)),class:"page-link","aria-label":"Next"},Y)],2)])])])],64)}const ie=k(E,[["render",Z]]);export{ie as default};
