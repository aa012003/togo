import{a as h}from"./axios-CV48_vsH.js";import{_ as x,S as _,a as P,r as u,o,c as n,d as C,b as e,F as d,e as m,n as g,x as L,w as T,g as p,t as r,y as w}from"./index-BZpAAvGB.js";import{c as V}from"./cartStore-DF1bjGJI.js";var E={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"joychiang",BASE_URL:"/production-sub-path/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:v,VITE_PATH:f}=E,N={data(){return{products:{},product:{},qty:1,pages:{},selectedCategory:"",currentPage:1,isLoading:!1}},watch:{"$route.query":{handler(){this.getProducts()}}},methods:{getProducts(){const{category:s=""}=this.$route.query,i=this.selectedCategory||s;this.isLoading=!0,h.get(`${v}/api/${f}/products?category=${i}&page=${this.currentPage}`).then(c=>{this.pages=c.data.pagination,this.products=c.data.products,this.isLoading=!1}).catch(c=>{_.fire(c.response.data.message),this.isLoading=!1})},changePage(s){this.currentPage=s,this.getProducts()},...P(V,["addToCart"])},mounted(){h.get(`${v}/api/${f}/products`).then(s=>{this.categories=s.data.pagination.category}).catch(s=>{_.fire(s.response.data.message),this.isLoading=!1}),this.getProducts()}},R=e("div",{class:"bg-white sticky-top"},[e("div",{class:"container"})],-1),S={class:"container mt-md-5 mt-3 mb-7"},$={class:"row"},B={class:"card border-0 mb-4 position-relative position-relative"},U=["src"],q=e("a",{class:"text-dark"},[e("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),A={class:"card-body p-0"},D={class:"mb-0 mt-3"},I={to:"`/product/{product.id}`",class:"text-info h4",style:{"text-decoration":"none"}},j=["onClick"],F=e("i",{class:"bi bi-cart me-2"},null,-1),H={key:0,class:"text-danger h5 mt-3"},M={key:1},O={class:"text-danger h5 mt-3"},z={class:"text-light h6"},G={class:"d-flex justify-content-center"},J={class:"pagination",style:{cursor:"pointer"}},K=e("span",{"aria-hidden":"true"},"«",-1),Q=[K],W=["onClick"],X=e("span",{"aria-hidden":"true"},"»",-1),Y=[X];function Z(s,i,c,ee,a,l){const y=u("loading"),b=u("RouterLink");return o(),n(d,null,[C(y,{active:a.isLoading,"onUpdate:active":i[0]||(i[0]=t=>a.isLoading=t),"can-cancel":!0,"on-cancel":s.onCancel,"is-full-page":s.fullPage},null,8,["active","on-cancel","is-full-page"]),R,e("div",S,[e("div",$,[(o(!0),n(d,null,m(a.products,t=>(o(),L(b,{to:`/product/${t.id}`,style:{"text-decoration":"none"},class:"col-md-3",key:t.id},{default:T(()=>[e("div",B,[e("img",{src:t.imageUrl,alt:"產品圖片",class:"object-fit-cover",style:{width:"100%",height:"auto","aspect-ratio":"1 / 1"}},null,8,U),q,e("div",A,[e("h6",D,[e("div",I,[p(r(t.title)+" ",1),e("div",null,[e("button",{class:"btn btn-danger text-white mt-3",type:"button",style:{position:"relative",right:"0px",top:"0px",width:"100%"},onClick:w(k=>s.addToCart(t.id,a.qty),["prevent"])},[F,p("加入購物車 ")],8,j)]),t.origin_price==t.price?(o(),n("div",H,"NT$ "+r(t.price),1)):(o(),n("div",M,[e("div",O,[p("NT$ "+r(t.price)+" ",1),e("del",z,"NT$ "+r(t.origin_price),1)])]))])])])])]),_:2},1032,["to"]))),128))]),e("nav",G,[e("ul",J,[e("li",{class:g(["page-item",{disabled:!a.pages.has_pre}])},[e("a",{onClick:i[1]||(i[1]=t=>l.changePage(a.pages.current_page-1)),class:"page-link","aria-label":"Previous"},Q)],2),(o(!0),n(d,null,m(a.pages.total_pages,t=>(o(),n("li",{class:g(["page-item",{active:t===a.pages.current_page}]),key:t+123},[e("a",{class:"page-link",onClick:k=>l.changePage(t)},r(t),9,W)],2))),128)),e("li",{class:g(["page-item",{disabled:!a.pages.has_next}])},[e("a",{onClick:i[2]||(i[2]=t=>l.changePage(a.pages.current_page+1)),class:"page-link","aria-label":"Next"},Y)],2)])])])],64)}const ie=x(N,[["render",Z]]);export{ie as default};
